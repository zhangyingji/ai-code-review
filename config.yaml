# ========================================
# GitLab 配置
# ========================================
gitlab:
  # GitLab 服务器地址，例如: https://gitlab.com 或自建服务器地址
  url: "https://gitlab.example.com"
  
  # 个人访问令牌 (Personal Access Token)
  # 在 GitLab 中生成: 用户设置 -> 访问令牌 -> 创建新令牌
  # 需要权限: api, read_repository
  private_token: "your_gitlab_token"
  
  # 项目 ID，可以在 GitLab 项目首页查看（项目名称下方）
  project_id: 123

# ========================================
# 分支配置
# ========================================
branch:
  # 要评审的分支名称
  # 可以通过命令行参数 -s/--source 覆盖
  review_branch: "develop"
  
  # 对比基准分支
  # 必须指定，不能为空
  # 可以通过命令行参数 -t/--target 覆盖
  base_branch: "main"

# ========================================
# 大模型配置
# ========================================
llm:
  # API 完整 URL，应包含 /chat/completions 路径
  # 例如: http://ip:port/r/ai-deploy-dsfp-prd/qwen-max/v1/chat/completions
  api_url: "http://your-api-server:port/path/to/model/v1/chat/completions"
  
  # API 密钥
  api_key: "your_api_key"
  
  # 模型名称
  model: "qwen-max"
  
  # 温度参数 (0.0-2.0)
  # 较低值: 更确定、一致的输出 (推荐 0.2-0.5)
  # 较高值: 更随机、创意的输出
  temperature: 0.3
  
  # 最大生成 token 数
  # 根据需要调整，评审结果较长时可增加到 3000-4000
  max_tokens: 2000
  
  # 是否启用深度思考模式
  # true: 模型会进行深度执行评审，耗时会增加但精度更高
  # false: 常规评审模式
  enable_thinking: false

# ========================================
# 性能配置
# ========================================
performance:
  # 是否启用并发评审
  # true: 多个文件同时评审，显著提升速度 (推荐)
  # false: 串行评审，适用于 API 限流严格的场景
  enable_concurrent: true
  
  # 最大并发 worker 数量
  # 建议值: 3-5，过高可能触发 API 频率限制
  # 根据大模型 API 的 RPM (Requests Per Minute) 限制调整
  max_workers: 3
  
  # 批量处理大小 (预留字段，当前未使用)
  batch_size: 10

# ========================================
# 日志配置
# ========================================
logging:
  # 是否启用文件日志
  # true: 日志保存到文件，方便排查问题 (推荐)
  # false: 仅输出到控制台
  enabled: true
  
  # 日志文件保存目录
  log_dir: "./logs"
  
  # 日志级别
  # - DEBUG: 详细调试信息，包括 API 请求、响应等
  # - INFO: 常规信息，记录主要流程 (推荐)
  # - WARNING: 警告信息，不影响运行的问题
  # - ERROR: 错误信息，仅记录异常情况
  level: "INFO"
  
  # 单个日志文件最大大小 (MB)
  # 超过后自动轮转到新文件
  max_file_size: 10
  
  # 保留的日志文件数量
  # 超过后删除最旧的文件
  backup_count: 5
  
  # 是否同时输出到控制台
  # true: 日志同时显示在终端和保存到文件 (推荐)
  # false: 仅保存到文件
  console_output: true

# ========================================
# 评审规则配置
# ========================================
# 每个规则类别可以单独启用/禁用
# 可以根据项目需要添加自定义规则类别
review_rules:
  # ---------- 代码规范检查 ----------
  code_style:
    # 是否启用此类别的检查
    enabled: true
    
    # 具体检查规则列表，大模型会根据这些规则进行评审
    rules:
      - "检查代码格式是否符合团队规范"
      - "检查命名是否清晰且符合约定"
      - "检查是否有过长的函数或类"
  
  # ---------- 安全检查 ----------
  security:
    enabled: true
    rules:
      - "检查是否有 SQL 注入风险"
      - "检查是否有 XSS 漏洞风险"
      - "检查敏感信息是否硬编码 (API Key, 密码等)"
      - "检查是否有不安全的依赖库"
  
  # ---------- 性能检查 ----------
  performance:
    enabled: true
    rules:
      - "检查是否有不必要的循环嵌套"
      - "检查是否有内存泄漏风险"
      - "检查数据库查询是否优化"
  
  # ---------- 最佳实践 ----------
  best_practices:
    enabled: true
    rules:
      - "检查错误处理是否完善"
      - "检查是否有适当的日志记录"
      - "检查是否遵循 SOLID 原则"
      - "检查代码复用性"
  
  # ---------- 自定义规则示例 ----------
  # 可以添加项目特定的规则类别，例如:
  # company_standards:
  #   enabled: false
  #   rules:
  #     - "检查是否使用公司统一框架"
  #     - "检查是否符合团队编码规范"

# ========================================
# 报告配置
# ========================================
report:
  # 报告输出目录
  # 可以通过命令行参数 -o/--output 覆盖
  output_dir: "./reports"
  
  # 报告格式
  # - html: 网页格式，包含可视化图表 (推荐)
  # - markdown: Markdown 格式，适合版本控制
  # - json: JSON 格式，适合程序解析和 CI/CD 集成
  # 可以通过命令行参数 -f/--format 覆盖
  format: "html"
  
  # 是否按作者分组显示
  # true: 报告中会按提交者统计问题
  # false: 仅按文件显示
  group_by_author: true
  
  # 是否在报告中包含代码片段
  # true: 显示问题相关的代码上下文
  # false: 仅显示问题描述
  include_code_snippet: true
  
  # 问题严重程度级别定义
  # 大模型会根据这些级别对问题进行分类
  severity_levels:
    - "critical"    # 严重问题: 必须修复，影响功能或安全
    - "major"       # 主要问题: 应当修复，影响代码质量
    - "minor"       # 次要问题: 建议修复，不影响主要功能
    - "suggestion"  # 优化建议: 可选修复，提升代码质量
